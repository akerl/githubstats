#!/usr/bin/env ruby

require 'github_stats'

contrib = Github_Stats.new ARGV.first

puts "Contribution data for #{contrib.user}:
    Today's score: #{contrib.today}
    Current streak: #{contrib.streak.length}
    Longest streak: #{contrib.longest_streak.length}
    High score: #{contrib.max.score} on #{contrib.max.date}
    Quartile boundaries: #{contrib.quartile_boundaries.inspect}"

# Uses https://github.com/holman/spark
system('spark', *contrib.data.pop(60).collect { |point| point.score.to_s })

